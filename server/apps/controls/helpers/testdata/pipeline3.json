{
    "constants": {
	"sample_id": "X53J7F"
    },

    "applications": [
	{
	    "id": "cat",
	    "docker_image": "cat"
	},
	{
	    "id": "echo",
	    "docker_image": "echo"
	}
    ],

    "remote_file_locations":[
	{
	    "comment": "here we are just pulling a file from the local drive, but normally this would include required info to pull a file from cloud storage",
	    "id": "hellofilesource",
	    "path": "/data/hello.in"
	},
	{
	    "comment": "here we are just writing to the local drive, but normally this would include required info to write a file to cloud storage",
	    "id": "helloworldfiledestination",
	    "path": "/data/helloworld_${sample_id}.out"
	}
    ],
    
    "files": [
	{
	    "comment": "This file will be used in several tasks in a session, but will not be saved to persistent storage.",
	    "id": "worldfile",
	    "path": "words/world_${sample_id}.txt"
	},
	{
	    "comment": "This file needs to be imported. A separate 'imports' declaration gives info on where to find it.",
	    "id": "hellofile",
	    "path": "words/hello_${sample_id}.txt",
	    "import_from": "hellofilesource"
	},
	{
	    "comment": "This result file will be exported to persistent storage. A separate 'exports' declaration gives info on where to put it.",
	    "id": "helloworldfile",
	    "path": "results/helloworld_${sample_id}.txt",
	    "save_to": "helloworldfiledestination"
	}
    ],

    "session_resource_sets":[
	{
	    "id": "default_session_resources",
	    "comment": "These are minimum resources for the whole session, i.e. requirements for a VM and mounted storage where a session will run",
	    "disk_space": "50k",
	    "memory": "16G",
	    "cores": 1
	}
    ],

    "step_resource_sets": [
	{
	    "id": "default_step_resources",
	    "memory": "1G",
	    "cores": 1
	}
    ],

    "steps": [
	{
	    "id": "worldstep",
	    "comment": "I'm back to declaring outputs and inputs explicity under the step, in order to allow ordering of steps.",
	    "constants": {
		"world_text": "world"
	    },
	    "command": "echo ${space_char}${world_text} > ${worldfile}",
	    "application": "echo",
	    "step_resource_set": "default_step_resources",
	    "output_file_ids": ["worldfile"]
	},
	
	{
	    "id": "helloworldstep",
	    "comment": "This step concatenates hello with world to write hello world. It won't run until that step finishes because it needs worldfile.",
	    "command": "cat ${hellofile} ${worldfile} > ${helloworldfile}",
	    "application": "cat",
	    "step_resource_set": "default_step_resources",
	    "input_file_ids": ["worldfile", "hellofile"],
	    "output_file_ids": ["helloworldfile"]
	}
    ],

    "sessions": [
	{
	    "id": "helloworldsession",
	    "comment": "A session is a set of tasks that share a common working directory, typically run on a single machine",

	    "session_resource_set": "default_session_resources",
	    
	    "constants": {
		"space_char": " "
	    },

	    "steps": [
		"worldstep",
		"helloworldstep"
	    ]
	}
    ],

    "pipeline": {
	"files": [
	    "worldfile",
	    "hellofile",
	    "helloworldfile"
	],
	
	"sessions":[
	    "helloworldsession"
	]
    }
}
