{
    "pipeline": {
        "files": [
            {
                "comment": "This file already exists and needs to be imported.",
                "id": "hellofile",
                "path": "words/hello_X53J7F.txt",
                "import_from": {
                    "id": "hellofilesource",
                    "comment": "This is publicly available file in Azure Blob storage.",
                    "url": "TODO"
                }
            },
            {
                "comment": "This file will be used in several tasks in a session, but will not be saved to persistent storage.",
                "id": "worldfile",
                "path": "words/world_X53J7F.txt"
            },
            {
                "comment": "This results file will be created by the analysis run.",
                "id": "helloworldfile",
                "path": "results/helloworld_X53J7F.txt",
                "save_to": {
                    "id": "helloworldfiledestination",
                    "comment": "The file will be written to Azure Blob storage",
                    "account": "TODO",
                    "container": "TODO",
                    "blob_id": "TODO"
                }
            }
        ],
        "sessions": [
            {
                "id": "helloworldsession",
                "comment": "A session is a set of tasks that share a common working directory, typically run on a single machine",
                "session_resource_set": {
                    "id": "default_session_resource_set",
                    "comment": "These are minimum resources for the whole session, i.e. requirements for a VM and mounted storage where a session will run",
                    "disk_space": "50k",
                    "memory": "16G",
                    "cores": 1
                },
                "steps": [
                    {
                        "id": "worldstep",
                        "comment": "Even though worldfile is only used inside the session, we declare it to make it clear that this step runs before helloworldstep",
                        "command": "echo world > words/world_X53J7F.txt",
                        "application": {
                            "id": "bwa",
                            "docker_image": "isaacliao/bwa-0.7.7"
                        },
                        "step_resource_set": "default_step_resources",
                        "output_file_ids": [
                            "worldfile"
                        ]
                    },
                    {
                        "id": "helloworldstep",
                        "comment": "This step concatenates hello with world to write hello world. It won't run until that step finishes because it needs worldfile.",
                        "command": "cat words/hello_X53J7F.txt words/world_X53J7F.txt > results/helloworld_X53J7F.txt",
                        "application": {
                            "id": "bwa",
                            "docker_image": "isaacliao/bwa-0.7.7"
                        },
                        "step_resource_set": {
                            "id": "default_step_resource_set",
                            "memory": "1G",
                            "cores": 1
                        },
                        "input_file_ids": [
                            "worldfile",
                            "hellofile"
                        ],
                        "output_file_ids": [
                            "helloworldfile"
                        ]
                    }
                ]
            }
        ]
    }
}